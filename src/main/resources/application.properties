################################################################################
# GLOBAL & PERFORMANCE CONFIG
################################################################################
quarkus.http.port=${PORT:8080}
# Limits upload size to prevent OOM attacks (10MB is safe for most bank files)
quarkus.http.limits.max-body-size=10M
com.transact.upload.max-lines=${MAX_UPLOAD_LINES:1000}
# Threading: Matches your 90s transaction timeout to prevent watchdog kills
quarkus.vertx.worker-pool-watchdog-timeout=95s
################################################################################
# MONGODB CONFIG (Hardened)
################################################################################
quarkus.mongodb.connection-string=${MONGO_URL:mongodb://localhost:27017}
quarkus.mongodb.database=transactdb
# Automatically adds /q/health/ready check for Mongo
quarkus.mongodb.health.enabled=true
################################################################################
# FUNDS TRANSFER API (REST CLIENT)
################################################################################
quarkus.rest-client."funds-transfer-api".url=${FUNDS_TRANSFER_API_URL:http://192.168.1.4:8085/omerchant/api/v1.0.0/order/payments}
quarkus.rest-client."funds-transfer-api".auth-basic=true
ft.api.user=${FT_API_USER:INPUTTER}
ft.api.pass=${FT_API_PASS:123456}
# Timeouts: Tighten these slightly for production if the API is reliable
quarkus.rest-client."funds-transfer-api".connect-timeout=30000
quarkus.rest-client."funds-transfer-api".read-timeout=90000
# REST Logging: SCOPE=ALL is dangerous in PROD as it logs passwords
# We enable it for DEV, but switch to HEADERS/NONE for PROD
quarkus.rest-client."funds-transfer-api".logging.scope=${REST_CLIENT_LOG_SCOPE:request-response}
quarkus.rest-client."funds-transfer-api".logging.body-limit=4096
quarkus.log.category."io.quarkus.rest.client.reactive.logging".level=${REST_LOG_LEVEL:DEBUG}
################################################################################
# SECURITY - JWT & AUTH (Externalized Keys)
################################################################################
quarkus.security.enabled=true
# Allow local login without JWT
quarkus.http.auth.permission.login.paths=/api/login
quarkus.http.auth.permission.login.policy=permit
# JWT Verification
mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_PATH:classpath:/jwt/rsaPublicKey.pem}
mp.jwt.verify.issuer=orange-bank-app
mp.jwt.verify.algorithm=RS256
mp.jwt.token.cookie=AuthToken
mp.jwt.token.header=Cookie
# JWT Signing (Only needed if this app issues tokens)
smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_PATH:classpath:/jwt/pkcs8_privateKey.pem}
################################################################################
# CACHE & MONITORING
################################################################################
quarkus.cache.caffeine."applications".maximum-size=500
quarkus.cache.caffeine."applications".expire-after-write=30M
# Enable OpenAPI and Health but protect them in production
quarkus.smallrye-openapi.enable=true
quarkus.smallrye-health.ui.enable=true
################################################################################
# PRODUCTION OVERRIDES (%prod)
################################################################################
# In production, we hide sensitive data and optimize
%prod.quarkus.log.category."io.quarkus.rest.client.reactive.logging".level=DEBUG
%prod.rest-client-log-scope=none
%prod.quarkus.smallrye-openapi.enable=false